{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState}from'react';import useReactRouter from'use-react-router';import{makeStyles,Button,createStyles}from'@material-ui/core';import Checkbox from'@material-ui/core/Checkbox';import FormControlLabel from\"@material-ui/core/FormControlLabel\";var baseFontColor='#4575b4';var useStyles=makeStyles(function(theme){var _topPageContainer;return createStyles({topPageContainer:(_topPageContainer={color:baseFontColor,height:'100vh',display:'flex',justifyContent:'center',alignItems:'center'},_defineProperty(_topPageContainer,theme.breakpoints.down('xs'),{alignItems:'baseline'}),_defineProperty(_topPageContainer,\"padding\",'0.625rem'),_topPageContainer),topPageOutFrame:{display:'flex',padding:'0.625rem',width:'100%',height:'100%',maxWidth:'350px',maxHeight:'475px',border:'solid 2px #4575b4',borderRadius:12},topPageInnerFrame:{display:'flex',position:'relative',flexDirection:'column',alignItems:'center',padding:'0.8125rem',width:'100%',height:'100%',maxHeight:'calc(100vh - 1.3rem)',border:'solid 1px #4575b4',borderRadius:5},topPageTitle:{marginTop:'1.6rem',fontFamily:'HiraMinPro-W6',// color: '#4575b4',\nfontSize:'17px',letterSpacing:'5px'},topPageSubTitle:{margin:'0.8rem',fontFamily:'HiraMinPro-W6',fontSize:'15px',letterSpacing:'4.41px',textAlign:'center'},topPagePresents:{fontFamily:'HiraMinPro-W6',fontSize:'12px',letterSpacing:'3.53px'},errorInfo:{color:baseFontColor,fontWeight:'bold',fontSize:'14px',letterSpacing:'-0.32px',textAlign:'center'},formInputWrapper:{position:'relative',width:'100%',margin:'0.4rem','& input[type=\"text\"]':{width:'100%',padding:'0.3rem 0.8rem',transition:'0.3s',letterSpacing:'1px',color:\"\".concat(baseFontColor,\" !important\"),border:'1px solid #4575B4',borderTopLeftRadius:'8px',borderTopRightRadius:'8px',backgroundColor:'#eeede9 !important',height:'44px'},'& input[type=\"password\"]':{width:'100%',padding:'0.3rem 0.8rem',transition:'0.3s',letterSpacing:'1px',color:\"\".concat(baseFontColor,\" !important\"),border:'1px solid #4575B4',borderBottomLeftRadius:'8px',borderBottomRightRadius:'8px',backgroundColor:'#eeede9 !important',height:'44px'}},formInputBox:{'& input[type=\"text\"]:focus':{outline:'none',boxShadow:'0 0 5px 1px rgb(118 158 247 / 50%)'}},loginButtonWrapper:{marginBottom:'1rem',position:'relative',width:'100%','& .MuiButton-disableElevation':{width:'100%',height:'50px',backgroundColor:baseFontColor,fontWeight:'bold',fontSize:'17px',color:'#ffffff',borderRadius:8}},checkLabel:{margin:'0.5rem auto','& .MuiFormControlLabel-root':{marginRight:'0.1rem',color:baseFontColor},'& .MuiTypography-body1':{fontSize:'14px'},'& .MuiCheckbox-colorPrimary.Mui-checked':{color:baseFontColor}},loginButtonDisable:{opacity:0.5},startText:{color:baseFontColor,fontSize:'14px',letterSpacing:'-0.32px',textAlign:'center','& a':{textDecoration:'underline',textUnderlinePosition:'under',cursor:'pointer','& .MuiSvgIcon-root':{fontSize:'1rem'}}}});});var LoginPage=function LoginPage(){var classes=useStyles();var title=\"リアルノベル\";var companyTitle=\"PERSOL\";var subTitle=\"PRESENTS\";var privacyText=\"利用者の個人情報を本サービスために利用すること、および個人情報の取り扱いについて同意する\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useReactRouter=useReactRouter(),history=_useReactRouter.history;var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isPopup=_useState8[0],setIsPopup=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isChecked=_useState10[0],setIsChecked=_useState10[1];var handleChange=function handleChange(event){setIsChecked(event.target.checked);};var userLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(isChecked===false)){_context2.next=3;break;}setErrorMessage('チェックを入れてください');return _context2.abrupt(\"return\");case 3:if(email&&password){fetch(\"https://jtb-prd.two-choices.jp/api/login\",{//非同期処理\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:email,password:password})}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(res.status<400)){_context.next=7;break;}_context.next=3;return res.json();case 3:result=_context.sent;if(result.isChanged){localStorage.setItem('jwt',JSON.stringify(result));// const jwt = localStorage.getItem('jwt')\n// console.log(jwt)\nhistory.push('/tutorial');}else{localStorage.setItem('jwt',JSON.stringify(result));// const jwt = localStorage.getItem('jwt')\n// console.log(jwt)\nhistory.push('/password-change');}_context.next=10;break;case 7:window.alert(\"else\");console.log(res);setErrorMessage('通信でエラーが発生しました');case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){if(error.status>=400)setErrorMessage('通信でエラーが発生しました');});//同期処理\n}else{setErrorMessage('メールアドレス、パスワードを入力してください');}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function userLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:classes.topPageContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.topPageOutFrame},/*#__PURE__*/React.createElement(\"div\",{className:classes.topPageInnerFrame},/*#__PURE__*/React.createElement(\"div\",{className:classes.topPageTitle},/*#__PURE__*/React.createElement(\"p\",null,title)),/*#__PURE__*/React.createElement(\"div\",{className:classes.topPageSubTitle},/*#__PURE__*/React.createElement(\"p\",null,companyTitle),/*#__PURE__*/React.createElement(\"p\",{className:classes.topPagePresents},subTitle)),/*#__PURE__*/React.createElement(\"div\",{className:classes.formInputWrapper},/*#__PURE__*/React.createElement(\"label\",{className:classes.formInputBox},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",placeholder:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u3092\\u5165\\u529B\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}))),/*#__PURE__*/React.createElement(\"div\",{className:classes.checkLabel},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{checked:isChecked,onChange:handleChange,name:\"checkedB\",color:\"primary\"}),label:privacyText})),/*#__PURE__*/React.createElement(\"div\",{className:classes.loginButtonWrapper},/*#__PURE__*/React.createElement(Button,{className:!isChecked?classes.loginButtonDisable:'',variant:\"contained\",disableElevation:true,disabled:!isChecked,onClick:function onClick(e){return userLogin(e);}},\"\\u30ED\\u30B0\\u30A4\\u30F3\")),/*#__PURE__*/React.createElement(\"div\",{className:classes.errorInfo},/*#__PURE__*/React.createElement(\"p\",null,errorMessage)),/*#__PURE__*/React.createElement(\"div\",{className:classes.startText},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return history.push('/password-reset');}},\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5FD8\\u308C\\u305F\\u65B9\\u306F\\u3053\\u3061\\u3089\")))));};export default LoginPage;","map":{"version":3,"sources":["/Users/rei.kawasato/Desktop/travel/src/pages/loginPage.tsx"],"names":["React","useState","useReactRouter","makeStyles","Button","createStyles","Checkbox","FormControlLabel","baseFontColor","useStyles","theme","topPageContainer","color","height","display","justifyContent","alignItems","breakpoints","down","topPageOutFrame","padding","width","maxWidth","maxHeight","border","borderRadius","topPageInnerFrame","position","flexDirection","topPageTitle","marginTop","fontFamily","fontSize","letterSpacing","topPageSubTitle","margin","textAlign","topPagePresents","errorInfo","fontWeight","formInputWrapper","transition","borderTopLeftRadius","borderTopRightRadius","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","formInputBox","outline","boxShadow","loginButtonWrapper","marginBottom","checkLabel","marginRight","loginButtonDisable","opacity","startText","textDecoration","textUnderlinePosition","cursor","LoginPage","classes","title","companyTitle","subTitle","privacyText","email","setEmail","password","setPassword","history","errorMessage","setErrorMessage","isPopup","setIsPopup","isChecked","setIsChecked","handleChange","event","target","checked","userLogin","fetch","method","headers","body","JSON","stringify","username","then","res","status","json","result","isChanged","localStorage","setItem","push","window","alert","console","log","catch","error","e","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport useReactRouter from 'use-react-router';\nimport { useDispatch } from \"react-redux\";\nimport pageActionModule, { usePageAction } from \"../modules/pageActionModule\";\nimport { login } from '../modules/api';\nimport { Typography, makeStyles, Grid, Box, Button, Theme, createStyles } from '@material-ui/core'\nimport classes from '*.module.css';\nimport { Widgets } from '@material-ui/icons';\nimport ArrowForwardIcon from \"@material-ui/icons/ArrowForward\";\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\n\nconst baseFontColor = '#4575b4';\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topPageContainer: {\n      color: baseFontColor,\n      height: '100vh',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      [theme.breakpoints.down('xs')]: {\n        alignItems: 'baseline',\n      },\n      padding: '0.625rem',\n    },\n\n    topPageOutFrame: {\n      display: 'flex',\n      padding: '0.625rem',\n      width: '100%',\n      height: '100%',\n      maxWidth: '350px',\n      maxHeight: '475px',\n      border: 'solid 2px #4575b4',\n      borderRadius: 12,\n    },\n\n    topPageInnerFrame: {\n      display: 'flex',\n      position: 'relative',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: '0.8125rem',\n      width: '100%',\n      height: '100%',\n      maxHeight: 'calc(100vh - 1.3rem)',\n      border: 'solid 1px #4575b4',\n      borderRadius: 5,\n    },\n\n    topPageTitle: {\n      marginTop: '1.6rem',\n      fontFamily: 'HiraMinPro-W6',\n      // color: '#4575b4',\n      fontSize: '17px',\n      letterSpacing: '5px',\n    },\n\n    topPageSubTitle: {\n      margin: '0.8rem',\n      fontFamily: 'HiraMinPro-W6',\n      fontSize: '15px',\n      letterSpacing: '4.41px',\n      textAlign: 'center',\n    },\n\n    topPagePresents: {\n      fontFamily: 'HiraMinPro-W6',\n      fontSize: '12px',\n      letterSpacing: '3.53px',\n    },\n\n    errorInfo: {\n      color: baseFontColor,\n      fontWeight: 'bold',\n      fontSize: '14px',\n      letterSpacing: '-0.32px',\n      textAlign: 'center',\n    },\n\n    formInputWrapper: {\n      position: 'relative',\n      width: '100%',\n      margin: '0.4rem',\n      '& input[type=\"text\"]': {\n        width: '100%',\n        padding: '0.3rem 0.8rem',\n        transition: '0.3s',\n        letterSpacing: '1px',\n        color: `${baseFontColor} !important`,\n        border: '1px solid #4575B4',\n        borderTopLeftRadius: '8px',\n        borderTopRightRadius: '8px',\n        backgroundColor: '#eeede9 !important',\n        height: '44px',\n      },\n\n      '& input[type=\"password\"]': {\n        width: '100%',\n        padding: '0.3rem 0.8rem',\n        transition: '0.3s',\n        letterSpacing: '1px',\n        color: `${baseFontColor} !important`,\n        border: '1px solid #4575B4',\n        borderBottomLeftRadius: '8px',\n        borderBottomRightRadius: '8px',\n        backgroundColor: '#eeede9 !important',\n        height: '44px',\n      },\n    },\n\n    formInputBox: {\n      '& input[type=\"text\"]:focus': {\n        outline: 'none',\n        boxShadow: '0 0 5px 1px rgb(118 158 247 / 50%)',\n      }\n    },\n\n    loginButtonWrapper: {\n      marginBottom: '1rem',\n      position: 'relative',\n      width: '100%',\n      '& .MuiButton-disableElevation': {\n        width: '100%',\n        height: '50px',\n        backgroundColor: baseFontColor,\n        fontWeight: 'bold',\n        fontSize: '17px',\n        color: '#ffffff',\n        borderRadius: 8,\n      },\n    },\n\n    checkLabel: {\n      margin: '0.5rem auto',\n      '& .MuiFormControlLabel-root': {\n        marginRight: '0.1rem',\n        color: baseFontColor,\n      },\n      '& .MuiTypography-body1': {\n        fontSize: '14px',\n      },\n      '& .MuiCheckbox-colorPrimary.Mui-checked': {\n        color: baseFontColor,\n      },\n    },\n\n    loginButtonDisable: {\n      opacity: 0.5,\n    },\n\n    startText: {\n      color: baseFontColor,\n      fontSize: '14px',\n      letterSpacing: '-0.32px',\n      textAlign: 'center',\n      '& a': {\n        textDecoration: 'underline',\n        textUnderlinePosition: 'under',\n        cursor: 'pointer',\n        '& .MuiSvgIcon-root': {\n          fontSize: '1rem',\n        }\n      }\n    },\n  })\n);\n\nconst LoginPage: React.FC = () => {\n  const classes = useStyles()\n  const title = \"リアルノベル\";\n  const companyTitle = \"PERSOL\";\n  const subTitle = \"PRESENTS\";\n  const privacyText = \"利用者の個人情報を本サービスために利用すること、および個人情報の取り扱いについて同意する\";\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const { history } = useReactRouter();\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isPopup, setIsPopup] = useState(false);\n  const [isChecked, setIsChecked] = useState(false);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setIsChecked(event.target.checked);\n  };\n\n  const userLogin = async (event: React.MouseEvent<HTMLElement>) => {\n\n    if(isChecked===false){\n      setErrorMessage('チェックを入れてください');\n      return\n    }\n\n    \n    if (email && password) {\n      fetch(\"https://jtb-prd.two-choices.jp/api/login\", {//非同期処理\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ username: email, password: password })\n\n      }).then(async (res: any) => {\n        if (res.status < 400) {\n          const result = await res.json()\n          \n          if(result.isChanged){\n            \n            localStorage.setItem('jwt', JSON.stringify(result))\n            // const jwt = localStorage.getItem('jwt')\n            // console.log(jwt)\n              history.push('/tutorial')\n            }else{\n              localStorage.setItem('jwt', JSON.stringify(result))\n              // const jwt = localStorage.getItem('jwt')\n              // console.log(jwt)\n              history.push('/password-change')\n            }\n          \n        } else {\n          window.alert(\"else\")\n\n          console.log(res)\n          setErrorMessage('通信でエラーが発生しました')\n        }\n\n      })\n        .catch(error => { if (error.status >= 400) setErrorMessage('通信でエラーが発生しました') })//同期処理\n\n\n    } else {\n      setErrorMessage('メールアドレス、パスワードを入力してください');\n    }\n  }\n\n  return (\n    <div className={classes.topPageContainer}>\n      <div className={classes.topPageOutFrame}>\n        <div className={classes.topPageInnerFrame}>\n\n          <div className={classes.topPageTitle}>\n            <p>{title}</p>\n          </div>\n          <div className={classes.topPageSubTitle}>\n            <p>{companyTitle}</p>\n            <p className={classes.topPagePresents}>{subTitle}</p>\n          </div>\n          <div className={classes.formInputWrapper}>\n            <label className={classes.formInputBox}>\n              <input\n                type=\"text\"\n                name=\"email\"\n                placeholder=\"メールアドレスを入力\"\n                value={email}\n                onChange={e => setEmail(e.target.value)}\n              />\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"パスワードを入力\"\n                value={password}\n                onChange={e => setPassword(e.target.value)}\n              />\n            </label>\n          </div>\n          <div className={classes.checkLabel}>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={isChecked}\n                  onChange={handleChange}\n                  name=\"checkedB\"\n                  color=\"primary\"\n                />\n              }\n              label={privacyText}\n            />\n          </div>\n          <div className={classes.loginButtonWrapper}>\n            <Button className={!isChecked ? classes.loginButtonDisable : ''}\n              variant=\"contained\"\n              disableElevation\n              disabled={!isChecked}\n              onClick={(e) => userLogin(e)}\n            >\n              ログイン\n            </Button>\n          </div>\n          <div  className={classes.errorInfo}>\n            <p>{errorMessage}</p>\n          </div>\n          <div  className={classes.startText}>\n            <a onClick={() => history.push('/password-reset')}>パスワードを忘れた方はこちら</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    )\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}