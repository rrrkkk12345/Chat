{"ast":null,"code":"var _jsxFileName = \"/Users/rei.kawasato/Desktop/travel/src/pages/chat.tsx\";\nimport React, { useState } from 'react';\nimport { Typography, makeStyles, Box, ListItemAvatar, Avatar, List } from '@material-ui/core';\nimport ListItem from '@material-ui/core/ListItem'; // import classes from '*.module.css';\n\nimport Header from './header';\n\nconst UserIcon = require('../assets/test.png');\n\nimport userIcon from '../assets/test.png';\nconst useStyles = makeStyles(theme => ({\n  buttonDesign: {\n    top: \"70%\",\n    position: \"absolute\",\n    borderRadius: \"50%\",\n    backgroundColor: \"blue\",\n    color: \"white\",\n    // zIndex:100,\n    marginLeft: \"50%\",\n    fontFamily: 'メイリオ'\n  },\n  narrator: {\n    fontFamily: 'メイリオ',\n    // fontSize: 20,\n    display: 'flex',\n    alignItems: 'top',\n    //縦\n    textAlign: 'start',\n    //横\n    color: \"#994C00\",\n    backgroundColor: '#EEB57D',\n    borderRadius: 16,\n    height: 60,\n    width: '70%',\n    marginTop: 20,\n    alignSelf: '',\n    justifyContent: 'flex-start',\n    marginLeft: '15%',\n    padding: 10 // position:'relative',\n\n  },\n  yuka: {\n    fontFamily: 'メイリオ',\n    width: '100%',\n    maxWidth: '25ch',\n    backgroundColor: theme.palette.background.paper,\n    borderRadius: 20,\n    borderColor: 'blue',\n    padding: 10\n  },\n  yuka_label: {\n    fontSize: 15,\n    marginBottom: '0%',\n    marginLeft: '20%',\n    marginTop: '5%'\n  },\n  syujiinko: {\n    fontFamily: 'メイリオ',\n    border: 'solid',\n    color: '#7088b1',\n    borderRadius: 20,\n    borderColor: '#bfc8d5',\n    backgroundColor: '#e2e3e4',\n    width: '100%',\n    maxWidth: '30ch',\n    marginLeft: '40%',\n    padding: 10\n  },\n  avatar: {\n    // padding: 10,\n    marginLeft: 50\n  },\n  square: {\n    width: \"100%\",\n    height: \"900px\",\n    // margin:'0',\n    backgroundColor: \"#eeedea\"\n  }\n}));\nconst currentSentenceIdInit = \"0\";\nconst genderInit = \"0\";\nconst spotIdInit = \"A\";\nconst spotNameInit = \"大谷資料館\";\nconst scenarioListInit = [{\n  sentenceId: \"0\",\n  nextSentenceId: \"1\",\n  personName: \"優花\",\n  sentence: {\n    plane: \"初期値消したい\",\n    button: [{\n      buttonLabel: \"海外強度料理にしよう\",\n      nextSentenceId: \"21\"\n    }, {\n      buttonLabel: \"お蕎麦屋さんにしよう\",\n      nextSentenceId: \"22\"\n    }] // important: [\n    //     { \"海外強度料理にしよう\": \"B\" },\n    //     { \"お蕎麦屋さんにしよう\": \"C\" }\n    // ]\n\n  }\n}]; // const travelApi = axios.create({\n//     baseURL: \"http://localhost:3001/posts\",\n//     timeout: 30000,\n//     headers: { 'Content-Type': 'application/json' },\n//     responseType:'json',\n//   });\n// const sampleInit = [\n//     {\n//         name: \"yuka\",\n//         text: \"大谷石の採掘場だから、石ならではの温度なんだよね\"\n//     },\n// ]\n// const isButtonInit = false \n\nconst isButtonInit = [{\n  sentenceId: \"0\",\n  isDisp: false\n}];\n\nconst Chat = () => {\n  const classes = useStyles();\n  const persistState = localStorage.getItem('scenario'); // const persistGenderState = localStorage.getItem('gender')\n  // const [gender, setGender] = useState(persistGenderState ? JSON.parse(persistGenderState) : genderInit);\n\n  const persistScenarioListState = localStorage.getItem('scenarioList'); // const [sample, setSample] = useState(persistState ? JSON.parse(persistState) : sampleInit);\n\n  const [jsonData, setJsonData] = useState(); // const [scenarioList, setScenarioList] = useState(persistScenarioListState ? JSON.parse(persistScenarioListState) : scenarioListInit);\n\n  const [scenarioList, setScenarioList] = useState();\n  const [currentSentenceId, setCurrentSentenceId] = useState(currentSentenceIdInit);\n  const [test, setTest] = useState([]);\n  const [isButton, setIsButton] = useState(isButtonInit); // useEffect(() => localStorage.setItem('scenarioList', JSON.stringify(scenarioList)), [scenarioList])\n  // useEffect(() => {\n  //     console.log({ scenarioList });\n  // }, [scenarioList]);\n\n  const conversation = async () => {\n    //1 JSONファイルを取ってくる\n    // setIsButton(false)\n    function delay(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    } //2 Stateにセットする\n    //3 Stateから取ってきて表示する\n    //4 stateのNextscenarioをとってくる\n    //5 nextがDynamoのsencenceIDに合致したものを取ってくる\n    //6 2にループ\n\n\n    fetch(\"http://localhost:3001/posts\").then(response => response.json()).then(data => {\n      setJsonData(data);\n      console.log(\"-------\");\n      console.log(data);\n      console.log(\"-------\");\n      console.log(data.sentenceId);\n      data.map(scenario => {\n        if (scenario.sentenceId === currentSentenceId) {\n          console.log(\"qqq\");\n          scenarioList ? setScenarioList([...scenarioList, {\n            sentenceId: scenario.sentenceId,\n            nextSentenceId: scenario.nextSentenceId,\n            personName: scenario.personName,\n            sentence: {\n              plane: scenario.sentence.plane,\n              button: [{\n                buttonLabel: scenario.sentence.button.buttonLabel,\n                nextSentenceId: scenario.sentence.button.nextSentenceId\n              }]\n            }\n          }]) : setScenarioList([{\n            sentenceId: scenario.sentenceId,\n            nextSentenceId: scenario.nextSentenceId,\n            personName: scenario.personName,\n            sentence: {\n              plane: scenario.sentence.plane,\n              button: [{\n                buttonLabel: scenario.sentence.button.buttonLabel,\n                nextSentenceId: scenario.sentence.button.nextSentenceId\n              }]\n            }\n          }]);\n\n          if (data.nextSentenceId != \"\") {\n            setCurrentSentenceId(scenario.nextSentenceId);\n            console.log(scenario);\n          } // if (data.sentence.button.length === 2) {\n          //     // setIsButton(true)\n          //     console.log(\"INDEX\")\n          // }\n\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"\\u30C1\\u30E3\\u30C3\\u30C8\\u753B\\u9762\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }), scenarioList && scenarioList.map(scenario => scenario.personName == \"優花\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.yuka_label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }, \"\\u512A\\u82B1\"), /*#__PURE__*/React.createElement(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    alt: \"icon\",\n    src: userIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(List, {\n    className: classes.yuka,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 25\n    }\n  }, scenario.sentence.plane))) : scenario.personName == \"主人公\" ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: classes.syujiinko,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 29\n    }\n  }, scenario.sentence.plane))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: classes.narrator,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 33\n    }\n  }, scenario.sentence.plane)))), scenarioList && scenarioList.map(scenario => scenario.sentence.button.length === 2 && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }, scenario.sentence.button && scenario.sentence.button.map(button => /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 25\n    }\n  }, button.buttonLabel)))), /*#__PURE__*/React.createElement(\"button\", {\n    className: classes.buttonDesign,\n    onClick: () => {\n      conversation();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 13\n    }\n  }, \"\\u2191\"), /*#__PURE__*/React.createElement(Box, {\n    pt: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Copyright, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  })));\n};\n\nconst Copyright = () => {\n  return /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 9\n    }\n  }, \"Copyright © \", \"\\u30D1\\u30FC\\u30BD\\u30EB\\u30AD\\u30E3\\u30EA\\u30A2\\u682A\\u5F0F\\u4F1A\\u793E\", new Date().getFullYear(), \".\");\n};\n\nexport default Chat;","map":{"version":3,"sources":["/Users/rei.kawasato/Desktop/travel/src/pages/chat.tsx"],"names":["React","useState","Typography","makeStyles","Box","ListItemAvatar","Avatar","List","ListItem","Header","UserIcon","require","userIcon","useStyles","theme","buttonDesign","top","position","borderRadius","backgroundColor","color","marginLeft","fontFamily","narrator","display","alignItems","textAlign","height","width","marginTop","alignSelf","justifyContent","padding","yuka","maxWidth","palette","background","paper","borderColor","yuka_label","fontSize","marginBottom","syujiinko","border","avatar","square","currentSentenceIdInit","genderInit","spotIdInit","spotNameInit","scenarioListInit","sentenceId","nextSentenceId","personName","sentence","plane","button","buttonLabel","isButtonInit","isDisp","Chat","classes","persistState","localStorage","getItem","persistScenarioListState","jsonData","setJsonData","scenarioList","setScenarioList","currentSentenceId","setCurrentSentenceId","test","setTest","isButton","setIsButton","conversation","delay","ms","Promise","resolve","setTimeout","fetch","then","response","json","data","console","log","map","scenario","length","Copyright","Date","getFullYear"],"mappings":";AAAA,OAAOA,KAAP,IAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAuCC,GAAvC,EAAoDC,cAApD,EAAoEC,MAApE,EAA4EC,IAA5E,QAAwF,mBAAxF;AACA,OAAOC,QAAP,MAAqB,4BAArB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AAIA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,oBAAD,CAAxB;;AACA,OAAOC,QAAP,MAAqB,oBAArB;AAGA,MAAMC,SAAS,GAAGV,UAAU,CAAEW,KAAD,KAAY;AACrCC,EAAAA,YAAY,EAAE;AACVC,IAAAA,GAAG,EAAE,KADK;AAEVC,IAAAA,QAAQ,EAAE,UAFA;AAGVC,IAAAA,YAAY,EAAE,KAHJ;AAIVC,IAAAA,eAAe,EAAE,MAJP;AAKVC,IAAAA,KAAK,EAAE,OALG;AAMV;AACAC,IAAAA,UAAU,EAAE,KAPF;AAQVC,IAAAA,UAAU,EAAE;AARF,GADuB;AAWrCC,EAAAA,QAAQ,EAAE;AACND,IAAAA,UAAU,EAAE,MADN;AAEN;AACAE,IAAAA,OAAO,EAAE,MAHH;AAINC,IAAAA,UAAU,EAAE,KAJN;AAIY;AAClBC,IAAAA,SAAS,EAAE,OALL;AAKa;AACnBN,IAAAA,KAAK,EAAE,SAND;AAOND,IAAAA,eAAe,EAAE,SAPX;AAQND,IAAAA,YAAY,EAAE,EARR;AASNS,IAAAA,MAAM,EAAE,EATF;AAUNC,IAAAA,KAAK,EAAE,KAVD;AAWNC,IAAAA,SAAS,EAAE,EAXL;AAYNC,IAAAA,SAAS,EAAE,EAZL;AAaNC,IAAAA,cAAc,EAAE,YAbV;AAcNV,IAAAA,UAAU,EAAE,KAdN;AAeNW,IAAAA,OAAO,EAAE,EAfH,CAgBN;;AAhBM,GAX2B;AA6BrCC,EAAAA,IAAI,EAAE;AACFX,IAAAA,UAAU,EAAE,MADV;AAEFM,IAAAA,KAAK,EAAE,MAFL;AAGFM,IAAAA,QAAQ,EAAE,MAHR;AAIFf,IAAAA,eAAe,EAAEL,KAAK,CAACqB,OAAN,CAAcC,UAAd,CAAyBC,KAJxC;AAKFnB,IAAAA,YAAY,EAAE,EALZ;AAMFoB,IAAAA,WAAW,EAAE,MANX;AAOFN,IAAAA,OAAO,EAAE;AAPP,GA7B+B;AAsCrCO,EAAAA,UAAU,EAAE;AACRC,IAAAA,QAAQ,EAAE,EADF;AAERC,IAAAA,YAAY,EAAE,IAFN;AAGRpB,IAAAA,UAAU,EAAE,KAHJ;AAIRQ,IAAAA,SAAS,EAAE;AAJH,GAtCyB;AA4CrCa,EAAAA,SAAS,EAAE;AACPpB,IAAAA,UAAU,EAAE,MADL;AAEPqB,IAAAA,MAAM,EAAE,OAFD;AAGPvB,IAAAA,KAAK,EAAE,SAHA;AAIPF,IAAAA,YAAY,EAAE,EAJP;AAKPoB,IAAAA,WAAW,EAAE,SALN;AAMPnB,IAAAA,eAAe,EAAE,SANV;AAOPS,IAAAA,KAAK,EAAE,MAPA;AAQPM,IAAAA,QAAQ,EAAE,MARH;AASPb,IAAAA,UAAU,EAAE,KATL;AAUPW,IAAAA,OAAO,EAAE;AAVF,GA5C0B;AAwDrCY,EAAAA,MAAM,EAAE;AACJ;AACAvB,IAAAA,UAAU,EAAE;AAFR,GAxD6B;AA4DrCwB,EAAAA,MAAM,EAAE;AACJjB,IAAAA,KAAK,EAAE,MADH;AAEJD,IAAAA,MAAM,EAAE,OAFJ;AAGJ;AACAR,IAAAA,eAAe,EAAE;AAJb;AA5D6B,CAAZ,CAAD,CAA5B;AAmFA,MAAM2B,qBAA6B,GAAG,GAAtC;AACA,MAAMC,UAAkB,GAAG,GAA3B;AACA,MAAMC,UAAkB,GAAG,GAA3B;AACA,MAAMC,YAAoB,GAAG,OAA7B;AACA,MAAMC,gBAAgB,GAAG,CACrB;AACIC,EAAAA,UAAU,EAAE,GADhB;AAEIC,EAAAA,cAAc,EAAE,GAFpB;AAGIC,EAAAA,UAAU,EAAE,IAHhB;AAIIC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,KAAK,EAAE,SADD;AAENC,IAAAA,MAAM,EAAE,CACJ;AACIC,MAAAA,WAAW,EAAE,YADjB;AAEIL,MAAAA,cAAc,EAAE;AAFpB,KADI,EAKJ;AACIK,MAAAA,WAAW,EAAE,YADjB;AAEIL,MAAAA,cAAc,EAAE;AAFpB,KALI,CAFF,CAYN;AACA;AACA;AACA;;AAfM;AAJd,CADqB,CAAzB,C,CA0BA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,MAAMM,YAAY,GAAG,CAAC;AAAEP,EAAAA,UAAU,EAAE,GAAd;AAAmBQ,EAAAA,MAAM,EAAE;AAA3B,CAAD,CAArB;;AAEA,MAAMC,IAAc,GAAG,MAAM;AACzB,QAAMC,OAAO,GAAGhD,SAAS,EAAzB;AACA,QAAMiD,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAArB,CAFyB,CAGzB;AACA;;AACA,QAAMC,wBAAwB,GAAGF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAjC,CALyB,CAMzB;;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0BlE,QAAQ,EAAxC,CAPyB,CAQzB;;AACA,QAAM,CAACmE,YAAD,EAAeC,eAAf,IAAkCpE,QAAQ,EAAhD;AACA,QAAM,CAACqE,iBAAD,EAAoBC,oBAApB,IAA4CtE,QAAQ,CAAC6C,qBAAD,CAA1D;AACA,QAAM,CAAC0B,IAAD,EAAOC,OAAP,IAAkBxE,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACyE,QAAD,EAAWC,WAAX,IAA0B1E,QAAQ,CAACyD,YAAD,CAAxC,CAZyB,CAazB;AAEA;AACA;AACA;;AAGA,QAAMkB,YAAY,GAAG,YAAY;AAI7B;AACA;AAGA,aAASC,KAAT,CAAeC,EAAf,EAA2B;AACvB,aAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAjC,CAAP;AACH,KAV4B,CAW7B;AACA;AACA;AACA;AACA;;;AAEAI,IAAAA,KAAK,CAAC,6BAAD,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI;AACVnB,MAAAA,WAAW,CAACmB,IAAD,CAAX;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACnC,UAAjB;AAEAmC,MAAAA,IAAI,CAACG,GAAL,CAAUC,QAAD,IAAmB;AAExB,YAAIA,QAAQ,CAACvC,UAAT,KAAwBmB,iBAA5B,EAA+C;AAC3CiB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACApB,UAAAA,YAAY,GAAGC,eAAe,CAAC,CAAC,GAAGD,YAAJ,EAAkB;AAC7CjB,YAAAA,UAAU,EAAEuC,QAAQ,CAACvC,UADwB;AAE7CC,YAAAA,cAAc,EAAEsC,QAAQ,CAACtC,cAFoB;AAG7CC,YAAAA,UAAU,EAAEqC,QAAQ,CAACrC,UAHwB;AAI7CC,YAAAA,QAAQ,EAAE;AACNC,cAAAA,KAAK,EAAEmC,QAAQ,CAACpC,QAAT,CAAkBC,KADnB;AAENC,cAAAA,MAAM,EAAE,CACJ;AACIC,gBAAAA,WAAW,EAAEiC,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBC,WAD1C;AAEIL,gBAAAA,cAAc,EAAEsC,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBJ;AAF7C,eADI;AAFF;AAJmC,WAAlB,CAAD,CAAlB,GAiBRiB,eAAe,CAAC,CAAC;AACblB,YAAAA,UAAU,EAAEuC,QAAQ,CAACvC,UADR;AAEbC,YAAAA,cAAc,EAAEsC,QAAQ,CAACtC,cAFZ;AAGbC,YAAAA,UAAU,EAAEqC,QAAQ,CAACrC,UAHR;AAIbC,YAAAA,QAAQ,EAAE;AACNC,cAAAA,KAAK,EAAEmC,QAAQ,CAACpC,QAAT,CAAkBC,KADnB;AAENC,cAAAA,MAAM,EAAE,CACJ;AACIC,gBAAAA,WAAW,EAAEiC,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBC,WAD1C;AAEIL,gBAAAA,cAAc,EAAEsC,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBJ;AAF7C,eADI;AAFF;AAJG,WAAD,CAAD,CAjBnB;;AAkCA,cAAIkC,IAAI,CAAClC,cAAL,IAAuB,EAA3B,EAA+B;AAC3BmB,YAAAA,oBAAoB,CAACmB,QAAQ,CAACtC,cAAV,CAApB;AACAmC,YAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ;AACH,WAvC0C,CAyC3C;AACA;AACA;AACA;;AACH;AACJ,OAhDD;AAiDH,KA1DL;AA4DH,GA7ED;;AAkFA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,sCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAGKtB,YAAY,IAAIA,YAAY,CAACqB,GAAb,CAAkBC,QAAD,IAAmBA,QAAQ,CAACrC,UAAT,IAAuB,IAAvB,gBACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAEQ,OAAO,CAACtB,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAC,MAAZ;AAAmB,IAAA,GAAG,EAAE3B,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,eAII,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEiD,OAAO,CAAC5B,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgCyD,QAAQ,CAACpC,QAAT,CAAkBC,KAAlD,CAJJ,CAFJ,CADiD,GAU/CmC,QAAQ,CAACrC,UAAT,IAAuB,KAAvB,gBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEQ,OAAO,CAACnB,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqCgD,QAAQ,CAACpC,QAAT,CAAkBC,KAAvD,CADJ,CADJ,CADF,gBAOM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAEM,OAAO,CAACtC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCmE,QAAQ,CAACpC,QAAT,CAAkBC,KAAtD,CADJ,CADJ,CAjBK,CAHrB,EA2BKa,YAAY,IAAIA,YAAY,CAACqB,GAAb,CAAkBC,QAAD,IAAmBA,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBmC,MAAzB,KAAoC,CAApC,iBACjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKD,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,IAA4BkC,QAAQ,CAACpC,QAAT,CAAkBE,MAAlB,CAAyBiC,GAAzB,CAA8BjC,MAAD,iBACtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASA,MAAM,CAACC,WAAhB,CADyB,CADjC,CADa,CA3BrB,eAqCI;AAAQ,IAAA,SAAS,EAAEI,OAAO,CAAC9C,YAA3B;AAAyC,IAAA,OAAO,EAAE,MAAM;AAAE6D,MAAAA,YAAY;AAAI,KAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cArCJ,eAuCI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAvCJ,CADJ;AA6CH,CAnJD;;AAqJA,MAAMgB,SAAS,GAAG,MAAM;AACpB,sBACI,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,KAAK,EAAC,eAAlC;AAAkD,IAAA,KAAK,EAAC,QAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,cADL,8EAKK,IAAIC,IAAJ,GAAWC,WAAX,EALL,EAMK,GANL,CADJ;AAWH,CAZD;;AAaA,eAAelC,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Typography, makeStyles, Grid, Box, Button, ListItemAvatar, Avatar, List } from '@material-ui/core'\nimport ListItem from '@material-ui/core/ListItem';\n// import classes from '*.module.css';\nimport Header from './header';\nimport SelectInput from '@material-ui/core/Select/SelectInput';\nimport axios, { AxiosResponse } from 'axios';\nimport { Data } from '@react-google-maps/api';\nconst UserIcon = require('../assets/test.png');\nimport userIcon from '../assets/test.png';\n\n\nconst useStyles = makeStyles((theme) => ({\n    buttonDesign: {\n        top: \"70%\",\n        position: \"absolute\",\n        borderRadius: \"50%\",\n        backgroundColor: \"blue\",\n        color: \"white\",\n        // zIndex:100,\n        marginLeft: \"50%\",\n        fontFamily: 'メイリオ',\n    },\n    narrator: {\n        fontFamily: 'メイリオ',\n        // fontSize: 20,\n        display: 'flex',\n        alignItems: 'top',//縦\n        textAlign: 'start',//横\n        color: \"#994C00\",\n        backgroundColor: '#EEB57D',\n        borderRadius: 16,\n        height: 60,\n        width: '70%',\n        marginTop: 20,\n        alignSelf: '',\n        justifyContent: 'flex-start',\n        marginLeft: '15%',\n        padding: 10,\n        // position:'relative',\n    },\n    yuka: {\n        fontFamily: 'メイリオ',\n        width: '100%',\n        maxWidth: '25ch',\n        backgroundColor: theme.palette.background.paper,\n        borderRadius: 20,\n        borderColor: 'blue',\n        padding: 10,\n    },\n    yuka_label: {\n        fontSize: 15,\n        marginBottom: '0%',\n        marginLeft: '20%',\n        marginTop: '5%',\n    },\n    syujiinko: {\n        fontFamily: 'メイリオ',\n        border: 'solid',\n        color: '#7088b1',\n        borderRadius: 20,\n        borderColor: '#bfc8d5',\n        backgroundColor: '#e2e3e4',\n        width: '100%',\n        maxWidth: '30ch',\n        marginLeft: '40%',\n        padding: 10,\n    },\n    avatar: {\n        // padding: 10,\n        marginLeft: 50,\n    },\n    square: {\n        width: \"100%\",\n        height: \"900px\",\n        // margin:'0',\n        backgroundColor: \"#eeedea\",\n    }\n}))\n\ntype JsonData = {\n    sentenceId: string\n    nextSentenceId: string\n    personName: string\n    sentence: {\n        plane: string,\n        button: Array<{\n            buttonLabel: string,\n            nextSentenceId: string\n        }>\n        // important:Array<{[key:string]:string}>[]\n    }\n}\n\n\nconst currentSentenceIdInit: string = \"0\"\nconst genderInit: string = \"0\"\nconst spotIdInit: string = \"A\"\nconst spotNameInit: string = \"大谷資料館\"\nconst scenarioListInit = [\n    {\n        sentenceId: \"0\",\n        nextSentenceId: \"1\",\n        personName: \"優花\",\n        sentence: {\n            plane: \"初期値消したい\",\n            button: [\n                {\n                    buttonLabel: \"海外強度料理にしよう\",\n                    nextSentenceId: \"21\"\n                },\n                {\n                    buttonLabel: \"お蕎麦屋さんにしよう\",\n                    nextSentenceId: \"22\"\n                }\n            ],\n            // important: [\n            //     { \"海外強度料理にしよう\": \"B\" },\n            //     { \"お蕎麦屋さんにしよう\": \"C\" }\n            // ]\n        }\n\n    }\n]\n\n// const travelApi = axios.create({\n//     baseURL: \"http://localhost:3001/posts\",\n//     timeout: 30000,\n//     headers: { 'Content-Type': 'application/json' },\n//     responseType:'json',\n//   });\n\n// const sampleInit = [\n//     {\n//         name: \"yuka\",\n//         text: \"大谷石の採掘場だから、石ならではの温度なんだよね\"\n//     },\n// ]\n\n// const isButtonInit = false \nconst isButtonInit = [{ sentenceId: \"0\", isDisp: false }]\n\nconst Chat: React.FC = () => {\n    const classes = useStyles()\n    const persistState = localStorage.getItem('scenario')\n    // const persistGenderState = localStorage.getItem('gender')\n    // const [gender, setGender] = useState(persistGenderState ? JSON.parse(persistGenderState) : genderInit);\n    const persistScenarioListState = localStorage.getItem('scenarioList')\n    // const [sample, setSample] = useState(persistState ? JSON.parse(persistState) : sampleInit);\n    const [jsonData, setJsonData] = useState<JsonData[]>()\n    // const [scenarioList, setScenarioList] = useState(persistScenarioListState ? JSON.parse(persistScenarioListState) : scenarioListInit);\n    const [scenarioList, setScenarioList] = useState<JsonData[]>()\n    const [currentSentenceId, setCurrentSentenceId] = useState(currentSentenceIdInit);\n    const [test, setTest] = useState([])\n    const [isButton, setIsButton] = useState(isButtonInit)\n    // useEffect(() => localStorage.setItem('scenarioList', JSON.stringify(scenarioList)), [scenarioList])\n\n    // useEffect(() => {\n    //     console.log({ scenarioList });\n    // }, [scenarioList]);\n\n\n    const conversation = async () => {\n\n\n\n        //1 JSONファイルを取ってくる\n        // setIsButton(false)\n\n\n        function delay(ms: number) {\n            return new Promise(resolve => setTimeout(resolve, ms));\n        }\n        //2 Stateにセットする\n        //3 Stateから取ってきて表示する\n        //4 stateのNextscenarioをとってくる\n        //5 nextがDynamoのsencenceIDに合致したものを取ってくる\n        //6 2にループ\n\n        fetch(\"http://localhost:3001/posts\")\n            .then(response => response.json())\n            .then(data => {\n                setJsonData(data)\n                console.log(\"-------\")\n                console.log(data)\n                console.log(\"-------\")\n                console.log(data.sentenceId)\n\n                data.map((scenario: any) => {\n\n                    if (scenario.sentenceId === currentSentenceId) {\n                        console.log(\"qqq\")\n                        scenarioList ? setScenarioList([...scenarioList, {\n                            sentenceId: scenario.sentenceId,\n                            nextSentenceId: scenario.nextSentenceId,\n                            personName: scenario.personName,\n                            sentence: {\n                                plane: scenario.sentence.plane,\n                                button: [\n                                    {\n                                        buttonLabel: scenario.sentence.button.buttonLabel,\n                                        nextSentenceId: scenario.sentence.button.nextSentenceId\n                                    }\n                                ]\n\n                            }\n\n\n                        }]) :\n                            setScenarioList([{\n                                sentenceId: scenario.sentenceId,\n                                nextSentenceId: scenario.nextSentenceId,\n                                personName: scenario.personName,\n                                sentence: {\n                                    plane: scenario.sentence.plane,\n                                    button: [\n                                        {\n                                            buttonLabel: scenario.sentence.button.buttonLabel,\n                                            nextSentenceId: scenario.sentence.button.nextSentenceId\n                                        }\n                                    ]\n\n                                }\n\n\n                            }])\n                        if (data.nextSentenceId != \"\") {\n                            setCurrentSentenceId(scenario.nextSentenceId)\n                            console.log(scenario)\n                        }\n\n                        // if (data.sentence.button.length === 2) {\n                        //     // setIsButton(true)\n                        //     console.log(\"INDEX\")\n                        // }\n                    }\n                })\n            })\n\n    }\n\n\n\n\n    return (\n        <div>\n            <Header title=\"チャット画面\" />\n\n            {scenarioList && scenarioList.map((scenario: any) => scenario.personName == \"優花\" ?\n                <div>\n                    <div className={classes.yuka_label}>優花</div>\n                    <ListItem>\n                        <ListItemAvatar>\n                            <Avatar alt=\"icon\" src={userIcon} />\n                        </ListItemAvatar>\n                        <List className={classes.yuka}>{scenario.sentence.plane}</List>\n                    </ListItem>\n                </div>\n                : scenario.personName == \"主人公\" ?\n                    <div>\n                        <ListItem>\n                            <List className={classes.syujiinko}>{scenario.sentence.plane}</List>\n                        </ListItem>\n                    </div>\n                    : \n                        <div>\n                            <ListItem>\n                                <List className={classes.narrator}>{scenario.sentence.plane}</List>\n                            </ListItem>\n                        </div>\n            )}\n\n            {scenarioList && scenarioList.map((scenario: any) => scenario.sentence.button.length === 2 &&\n                <div>\n                    {scenario.sentence.button && scenario.sentence.button.map((button: any) =>\n                        <button>{button.buttonLabel}</button>\n                    )}\n                    {/* <button>{scenario.sentence.button[1]}</button> */}\n                </div>\n\n            )}\n\n            <button className={classes.buttonDesign} onClick={() => { conversation() }}>↑</button>\n\n            <Box pt={4}>\n                <Copyright />\n            </Box>\n        </div>\n    )\n}\n\nconst Copyright = () => {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {\"Copyright © \"}\n            {/* <Link color=\"inherit\" to=\"/\"> */}\n          パーソルキャリア株式会社\n            {/* </Link>{\" \"} */}\n            {new Date().getFullYear()}\n            {\".\"}\n\n        </Typography>\n    );\n};\nexport default Chat;"]},"metadata":{},"sourceType":"module"}