{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import useReactRouter from'use-react-router';import{useDispatch}from\"react-redux\";import{makeStyles,TextField}from'@material-ui/core';var Frame=require('../assets/decorativeframe2.png');var useStyles=makeStyles({startText:{// borderBottom: \"1px solid #4575B4\",\nbackgroundColor:\"#EFEDE9\",fontSize:\"15px\",color:\"#4575B4\",width:\"60%\",height:\"5%\",marginTop:\"-70%\",marginLeft:\"20%\",zIndex:2,position:'absolute',// letterSpacing: \"6px\",\nfontFamily:\"メイリオ\",textAlign:\"center\",// lineHeight: \"50px\",\npaddingBottom:\"1px\"},buttonDesign:{// borderBottom: \"1px solid #4575B4\",\nbackgroundColor:\"#EFEDE9\",fontSize:\"15px\",color:\"#4575B4\",width:\"60%\",height:\"5%\",marginTop:\"20%\",marginLeft:\"20%\",zIndex:2,position:'absolute',// letterSpacing: \"6px\",\nfontFamily:\"メイリオ\",textAlign:\"center\",// lineHeight: \"50px\",\npaddingBottom:\"1px\"},toStart:{color:'blue',zIndex:2,borderBottom:'1px solid blue'},title:{textAlign:'center',zIndex:2,alignItems:'top'},border:{marginLeft:125,textAlign:'center',border:'1px solid',borderColor:'blue',zIndex:2},center_wrapper:{zIndex:2,textAlign:'center'},frameDesign:{zIndex:500,width:\"90%\",height:\"70%\",display:'flex',alignItems:'top',//縦\nmarginTop:\"10%\",justifyContent:'center',marginLeft:'3%',padding:10}});var PasswordChange=function PasswordChange(){var classes=useStyles();var title=\"選択式ミステリー旅行\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),previousPassword=_useState6[0],setPreviousPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),proposePassword=_useState8[0],setProposePassword=_useState8[1];var _useReactRouter=useReactRouter(),history=_useReactRouter.history;var dispatch=useDispatch();var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),securityCode=_useState10[0],setSecurityCode=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),errorMessage=_useState12[0],setErrorMessage=_useState12[1];var jwt=JSON.parse(localStorage.getItem('jwt'));var Authorization=jwt.Authorization,Accesstoken=jwt.Accesstoken;var passwordChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(localStorage.getItem('jwt'));if(previousPassword&&proposePassword){fetch(\"https://jtb-prd.two-choices.jp/api/change_password/\",{//非同期処理\nmethod:'POST',headers:{'Content-Type':'application/json','Authorization':Authorization,'accesstoken':Accesstoken},body:JSON.stringify({previousPassword:previousPassword,proposePassword:proposePassword})}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(res.status===200)){_context.next=8;break;}_context.next=3;return res.json();case 3:data=_context.sent;alert(\"パスワード変更完了しました。次回ログイン時は新規パスワードをご利用ください。\");history.push('/tutorial');_context.next=9;break;case 8:setErrorMessage('通信でエラーが発生しました');case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){if(error.statusCode>=400)setErrorMessage('通信でエラーが発生しました');});//同期処理\n}else{setErrorMessage('新旧パスワードを入力してください');}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function passwordChange(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:classes.center_wrapper},/*#__PURE__*/React.createElement(\"p\",{className:classes.title},\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5909\\u66F4\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonDesign},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic\",label:\"\\u65B0\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\",type:\"password\",fullWidth:true,onChange:function onChange(e){return setPreviousPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(TextField,{id:\"standard-basic\",label:\"\\u65B0\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\uFF08\\u78BA\\u8A8D\\u7528\\uFF09\",type:\"password\",fullWidth:true,onChange:function onChange(e){return setProposePassword(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return passwordChange(e);}},\"\\u9001\\u4FE1\")),/*#__PURE__*/React.createElement(\"div\",null),\"8\\u6587\\u5B57\\u4EE5\\u4E0A\\u3002\\u5927\\u6587\\u5B57\\u30FB\\u5C0F\\u6587\\u5B57\\u82F1\\u6570\\u5B57\\u30FB\\u8A18\\u53F7\\u3092\\uFF11\\u3064\\u4EE5\\u4E0A\",/*#__PURE__*/React.createElement(\"div\",{className:classes.startText},\" \\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u304A\\u5FD8\\u308C\\u306E\\u65B9\\u306F\\u3053\\u3061\\u3089\\u306B\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u3092\\u5165\\u529B\\u3057\\u3001\\u9001\\u4FE1\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"));};export default PasswordChange;","map":{"version":3,"sources":["/Users/rei.kawasato/Desktop/travel/src/pages/passwordChange.tsx"],"names":["React","useState","useReactRouter","useDispatch","makeStyles","TextField","Frame","require","useStyles","startText","backgroundColor","fontSize","color","width","height","marginTop","marginLeft","zIndex","position","fontFamily","textAlign","paddingBottom","buttonDesign","toStart","borderBottom","title","alignItems","border","borderColor","center_wrapper","frameDesign","display","justifyContent","padding","PasswordChange","classes","email","setEmail","password","setPassword","previousPassword","setPreviousPassword","proposePassword","setProposePassword","history","dispatch","securityCode","setSecurityCode","errorMessage","setErrorMessage","jwt","JSON","parse","localStorage","getItem","Authorization","Accesstoken","passwordChange","event","console","log","fetch","method","headers","body","stringify","then","res","status","json","data","alert","push","catch","error","statusCode","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport useReactRouter from 'use-react-router';\nimport { useDispatch } from \"react-redux\";\nimport pageActionModule, { usePageAction } from \"../modules/pageActionModule\";\nimport { login } from '../modules/api';\nimport { Typography, makeStyles, TextField,Grid, Box, Button } from '@material-ui/core'\nconst Frame = require('../assets/decorativeframe2.png');\n\nconst useStyles = makeStyles({\n  startText: {\n    // borderBottom: \"1px solid #4575B4\",\n    backgroundColor: \"#EFEDE9\",\n    fontSize: \"15px\",\n    color: \"#4575B4\",\n    width: \"60%\",\n    height: \"5%\",\n    marginTop: \"-70%\",\n    marginLeft: \"20%\",\n    zIndex: 2,\n    position: 'absolute',\n    // letterSpacing: \"6px\",\n    fontFamily: \"メイリオ\",\n    textAlign: \"center\",\n    // lineHeight: \"50px\",\n    paddingBottom: \"1px\",\n  },\n  buttonDesign: {\n    // borderBottom: \"1px solid #4575B4\",\n    backgroundColor: \"#EFEDE9\",\n    fontSize: \"15px\",\n    color: \"#4575B4\",\n    width: \"60%\",\n    height: \"5%\",\n    marginTop: \"20%\",\n    marginLeft: \"20%\",\n    zIndex: 2,\n    position: 'absolute',\n    // letterSpacing: \"6px\",\n    fontFamily: \"メイリオ\",\n    textAlign: \"center\",\n    // lineHeight: \"50px\",\n    paddingBottom: \"1px\",\n  },\n  toStart: {\n    color: 'blue',\n    zIndex: 2,\n    borderBottom: '1px solid blue'\n  },\n  title: {\n    textAlign: 'center',\n    zIndex: 2,\n    alignItems: 'top'\n  },\n  border: {\n    marginLeft: 125,\n    textAlign: 'center',\n    border: '1px solid',\n    borderColor: 'blue',\n    zIndex: 2,\n  },\n  center_wrapper: {\n    zIndex: 2,\n    textAlign: 'center',\n  },\n  frameDesign: {\n    zIndex: 500,\n    width: \"90%\",\n    height: \"70%\",\n    display: 'flex',\n    alignItems: 'top',//縦\n    marginTop: \"10%\",\n    justifyContent: 'center',\n    marginLeft: '3%',\n    padding: 10,\n  }\n})\n\nconst PasswordChange: React.FC = () => {\n  const classes = useStyles()\n  const title = \"選択式ミステリー旅行\"\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [previousPassword, setPreviousPassword] = useState('');\n  const [proposePassword, setProposePassword] = useState('');\n  const { history } = useReactRouter();\n  const dispatch = useDispatch();\n  const [securityCode, setSecurityCode] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const jwt = JSON.parse(localStorage.getItem('jwt') as string)\n  const { Authorization, Accesstoken } = jwt\n  const passwordChange = async (event: React.MouseEvent<HTMLElement>) => {\n    console.log(localStorage.getItem('jwt'))\n    if (previousPassword && proposePassword) {\n      fetch(\"https://jtb-prd.two-choices.jp/api/change_password/\", {//非同期処理\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': Authorization,\n          'accesstoken': Accesstoken\n        },\n        body: JSON.stringify({ previousPassword: previousPassword, proposePassword: proposePassword })\n\n      }).then(async (res: any) => {\n\n        if (res.status === 200) {\n\n          const data = await res.json()\n          alert(\"パスワード変更完了しました。次回ログイン時は新規パスワードをご利用ください。\")\n          history.push('/tutorial')\n        } else {\n\n          setErrorMessage('通信でエラーが発生しました')\n        }\n\n      })\n        .catch(error => { if (error.statusCode >= 400) setErrorMessage('通信でエラーが発生しました') })//同期処理\n\n\n    } else {\n      setErrorMessage('新旧パスワードを入力してください');\n    }\n\n  }\n\n  return (\n    <div className={classes.center_wrapper}>\n      {/* <p className={classes.title}>{title}</p> */}\n      <p className={classes.title}>パスワードを変更してください</p>\n      <div className={classes.buttonDesign}>\n        {/* <input\n          type=\"password\"\n          name=\"oldPassword\"\n          placeholder=\"旧パスワードを入力\"\n        // value={oldPassword}\n        // onChange={e => setOldPassword(e.target.value)}\n        /> */}\n        <div></div>\n        <form  noValidate autoComplete=\"off\">\n          <TextField \n          id=\"standard-basic\" \n          label=\"新パスワードを入力\" \n          type=\"password\"\n          fullWidth\n          onChange={e => setPreviousPassword(e.target.value)}\n          />\n          <div></div>\n           <TextField \n          id=\"standard-basic\" \n          label=\"新パスワードを入力（確認用）\" \n          type=\"password\"\n          fullWidth\n          onChange={e => setProposePassword(e.target.value)}\n          />\n        </form>\n        {/* <input\n          type=\"password\"\n          name=\"newPassword\"\n          placeholder=\"新パスワードを入力\"\n          // value={newPassword}\n          onChange={e => setPreviousPassword(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          name=\"newPassworVerify\"\n          placeholder=\"新パスワードを入力（確認用）\"\n          // value={newPassworVerify}\n          onChange={e => setProposePassword(e.target.value)}\n        /> */}\n        <div></div>\n        <button\n          onClick={(e) => passwordChange(e)}\n        >\n          送信\n        </button>\n\n      </div>\n      <div></div>\n      8文字以上。大文字・小文字英数字・記号を１つ以上\n      <div className={classes.startText}> パスワードをお忘れの方はこちらにメールアドレスを入力し、送信ボタンを押してください</div>\n\n    </div>\n  )\n}\n\n\nexport default PasswordChange;"]},"metadata":{},"sourceType":"module"}