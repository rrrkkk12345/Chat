{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rei.kawasato/Desktop/travel/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useState}from'react';import useReactRouter from'use-react-router';import{makeStyles}from'@material-ui/core';var Frame=require('../assets/decorativeframe2.png');var useStyles=makeStyles({startText:{// borderBottom: \"1px solid #4575B4\",\n// backgroundColor: \"#EFEDE9\",\nfontSize:\"15px\",color:\"#4575B4\",// position: 'absolute',\n// letterSpacing: \"6px\",\nfontFamily:\"メイリオ\",textAlign:\"center\",// lineHeight: \"50px\",\npaddingBottom:\"1px\"},buttonDesign:{// borderBottom: \"1px solid #4575B4\",\nbackgroundColor:\"#EFEDE9\",fontSize:\"15px\",color:\"#4575B4\",width:\"60%\",height:\"5%\",marginTop:\"-80%\",marginLeft:\"20%\",zIndex:2,position:'absolute',// letterSpacing: \"6px\",\nfontFamily:\"メイリオ\",textAlign:\"center\",// lineHeight: \"50px\",\npaddingBottom:\"1px\"},toStart:{color:'blue',zIndex:2,borderBottom:'1px solid blue'},title:{width:\"100%\",top:\"20%\",position:\"absolute\",zIndex:2,margin:\"0 auto\"},border:{marginLeft:125,textAlign:'center',border:'1px solid',borderColor:'blue',zIndex:2},center_wrapper:{zIndex:2,textAlign:'center'},forms:{// border: \"2px solid\",\n// borderColor: \"pink\",\nposition:\"absolute\",top:\"45%\",width:\"100%\",zIndex:600},frameDesign:{zIndex:0,position:\"absolute\",width:\"90%\",height:\"70%\",display:'flex',alignItems:'top',//縦\nmarginTop:\"10%\",justifyContent:'center',marginLeft:'3%',padding:10},privacy:{zIndex:100,position:\"absolute\",top:\"-200%\",// left: \"20%\",\nheight:\"400%\",width:\"100%\",borderColor:\"black\",backgroundColor:\"black\"},cover:{width:\"60%\",height:\"10%\",backgroundColor:\"#EFEDE9\",position:\"absolute\",left:\"20%\",top:\"60%\",zIndex:3}});var Popup=function Popup(props){var classes=useStyles();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:classes.privacy},/*#__PURE__*/React.createElement(\"h1\",null,props.text),/*#__PURE__*/React.createElement(\"button\",{onClick:props.closePopup},\"\\u9589\\u3058\\u308B\")));};var LoginPage=function LoginPage(){var classes=useStyles();var title=\"選択式ミステリー旅行\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useReactRouter=useReactRouter(),history=_useReactRouter.history;var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isPopup=_useState8[0],setIsPopup=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isChecked=_useState10[0],setIsChecked=_useState10[1];var togglePopup=function togglePopup(){setIsPopup(!isPopup);console.log(isPopup);};var userLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(isChecked===false)){_context2.next=3;break;}setErrorMessage('チェックを入れてください');return _context2.abrupt(\"return\");case 3:if(email&&password){fetch(\"https://jtb-prd.two-choices.jp/api/login\",{//非同期処理\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:email,password:password})}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(res.status<400)){_context.next=7;break;}_context.next=3;return res.json();case 3:result=_context.sent;if(result.isChanged){localStorage.setItem('jwt',JSON.stringify(result));// const jwt = localStorage.getItem('jwt')\n// console.log(jwt)\nhistory.push('/tutorial');}else{localStorage.setItem('jwt',JSON.stringify(result));// const jwt = localStorage.getItem('jwt')\n// console.log(jwt)\nhistory.push('/password-change');}_context.next=9;break;case 7:console.log(res);setErrorMessage('通信でエラーが発生しました');case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(error){if(error.statusCode>=400)setErrorMessage('通信でエラーが発生しました');});//同期処理\n}else{setErrorMessage('メールアドレス、パスワードを入力してください');}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function userLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:classes.center_wrapper},/*#__PURE__*/React.createElement(\"div\",{className:classes.cover}),/*#__PURE__*/React.createElement(\"img\",{src:Frame,className:classes.frameDesign}),/*#__PURE__*/React.createElement(\"div\",{className:classes.forms},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",placeholder:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u3092\\u5165\\u529B\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"password\"//passwordに後で変更\n,name:\"password\",placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\"// checked={checked}\n// defaultChecked={defaultChecked}\n,onChange:function onChange(){return setIsChecked(!isChecked);},className:\"checkbox__main\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return togglePopup();}},\"\\u30D7\\u30E9\\u30A4\\u30D0\\u30B7\\u30FC\\u30DD\\u30EA\\u30B7\\u30FC\"),isPopup?/*#__PURE__*/React.createElement(Popup,{text:\"Close me\",closePopup:togglePopup.bind(_this)}):null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"button\",{disabled:!isChecked,onClick:function onClick(e){return userLogin(e);}},\"\\u30ED\\u30B0\\u30A4\\u30F3\"),/*#__PURE__*/React.createElement(\"div\",null),errorMessage,/*#__PURE__*/React.createElement(\"div\",{className:classes.startText},\" \\u4E8B\\u524D\\u306B\\u30E1\\u30FC\\u30EB\\u306B\\u3066\\u3054\\u6848\\u5185\\u3057\\u307E\\u3057\\u305F\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u3068\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{className:classes.toStart,onClick:function onClick(){return history.push('/password-reset');}},\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u304A\\u5FD8\\u308C\\u306E\\u65B9\\u306F\\u3053\\u3061\\u3089\"))),/*#__PURE__*/React.createElement(\"div\",{className:classes.buttonDesign}));};export default LoginPage;","map":{"version":3,"sources":["/Users/rei.kawasato/Desktop/travel/src/pages/loginPage.tsx"],"names":["React","useState","useReactRouter","makeStyles","Frame","require","useStyles","startText","fontSize","color","fontFamily","textAlign","paddingBottom","buttonDesign","backgroundColor","width","height","marginTop","marginLeft","zIndex","position","toStart","borderBottom","title","top","margin","border","borderColor","center_wrapper","forms","frameDesign","display","alignItems","justifyContent","padding","privacy","cover","left","Popup","props","classes","text","closePopup","LoginPage","email","setEmail","password","setPassword","history","errorMessage","setErrorMessage","isPopup","setIsPopup","isChecked","setIsChecked","togglePopup","console","log","userLogin","event","fetch","method","headers","body","JSON","stringify","username","then","res","status","json","result","isChanged","localStorage","setItem","push","catch","error","statusCode","e","target","value","bind"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport useReactRouter from 'use-react-router';\nimport { useDispatch } from \"react-redux\";\nimport pageActionModule, { usePageAction } from \"../modules/pageActionModule\";\nimport { login } from '../modules/api';\nimport { Typography, makeStyles, Grid, Box, Button } from '@material-ui/core'\nimport classes from '*.module.css';\nimport { Widgets } from '@material-ui/icons';\nconst Frame = require('../assets/decorativeframe2.png');\n\nconst useStyles = makeStyles({\n  startText: {\n    // borderBottom: \"1px solid #4575B4\",\n    // backgroundColor: \"#EFEDE9\",\n    fontSize: \"15px\",\n    color: \"#4575B4\",\n    // position: 'absolute',\n    // letterSpacing: \"6px\",\n    fontFamily: \"メイリオ\",\n    textAlign: \"center\",\n    // lineHeight: \"50px\",\n    paddingBottom: \"1px\",\n  },\n  buttonDesign: {\n    // borderBottom: \"1px solid #4575B4\",\n    backgroundColor: \"#EFEDE9\",\n    fontSize: \"15px\",\n    color: \"#4575B4\",\n    width: \"60%\",\n    height: \"5%\",\n    marginTop: \"-80%\",\n    marginLeft: \"20%\",\n    zIndex: 2,\n    position: 'absolute',\n    // letterSpacing: \"6px\",\n    fontFamily: \"メイリオ\",\n    textAlign: \"center\",\n    // lineHeight: \"50px\",\n    paddingBottom: \"1px\",\n  },\n  toStart: {\n    color: 'blue',\n    zIndex: 2,\n    borderBottom: '1px solid blue'\n  },\n  title: {\n    width: \"100%\",\n    top: \"20%\",\n    position: \"absolute\",\n    zIndex: 2,\n    margin: \"0 auto\",\n  },\n  border: {\n    marginLeft: 125,\n    textAlign: 'center',\n    border: '1px solid',\n    borderColor: 'blue',\n    zIndex: 2,\n  },\n  center_wrapper: {\n    zIndex: 2,\n    textAlign: 'center',\n  },\n  forms: {\n    // border: \"2px solid\",\n    // borderColor: \"pink\",\n    position: \"absolute\",\n    top: \"45%\",\n    width: \"100%\",\n    zIndex:600\n  },\n  \n  frameDesign: {\n    zIndex: 0,\n    position: \"absolute\",\n    width: \"90%\",\n    height: \"70%\",\n    display: 'flex',\n    alignItems: 'top',//縦\n    marginTop: \"10%\",\n    justifyContent: 'center',\n    marginLeft: '3%',\n    padding: 10,\n  },\n  privacy: {\n    zIndex: 100,\n    position: \"absolute\",\n    top: \"-200%\",\n    // left: \"20%\",\n    height: \"400%\",\n    width: \"100%\",\n    borderColor: \"black\",\n    backgroundColor: \"black\",\n  },\n  cover: {\n    width:\"60%\",\n    height:\"10%\",\n    backgroundColor: \"#EFEDE9\",\n    position:\"absolute\",\n    left:\"20%\",\n    top:\"60%\",\n    zIndex:3,\n  }\n})\n\nconst Popup: React.FC<{ text: string, closePopup: any }> = (props: any) => {\n  const classes = useStyles()\n  return (\n    <div>\n      {/* <Fade></Fade> */}\n      <div className={classes.privacy}>\n        <h1>{props.text}</h1>\n        <button onClick={props.closePopup}>閉じる</button>\n      </div>\n    </div>\n  );\n}\nconst LoginPage: React.FC = () => {\n  const classes = useStyles()\n  const title = \"選択式ミステリー旅行\"\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const { history } = useReactRouter();\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isPopup, setIsPopup] = useState(false);\n  const [isChecked, setIsChecked] = useState(false);\n\n  const togglePopup = () => {\n    setIsPopup(!isPopup)\n    console.log(isPopup)\n  }\n\n\n  const userLogin = async (event: React.MouseEvent<HTMLElement>) => {\n\n    if(isChecked===false){\n      setErrorMessage('チェックを入れてください');\n      return\n    }\n\n    if (email && password) {\n      fetch(\"https://jtb-prd.two-choices.jp/api/login\", {//非同期処理\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ username: email, password: password })\n\n      }).then(async (res: any) => {\n        if (res.status < 400) {\n          const result = await res.json()\n          \n            if(result.isChanged){\n\n              localStorage.setItem('jwt', JSON.stringify(result))\n              // const jwt = localStorage.getItem('jwt')\n              // console.log(jwt)\n              history.push('/tutorial')\n            }else{\n              localStorage.setItem('jwt', JSON.stringify(result))\n              // const jwt = localStorage.getItem('jwt')\n              // console.log(jwt)\n              history.push('/password-change')\n            }\n          \n        } else {\n\n          console.log(res)\n          setErrorMessage('通信でエラーが発生しました')\n        }\n\n      })\n        .catch(error => { if (error.statusCode >= 400) setErrorMessage('通信でエラーが発生しました') })//同期処理\n\n\n    } else {\n      setErrorMessage('メールアドレス、パスワードを入力してください');\n    }\n  }\n\n  return (\n    <div className={classes.center_wrapper}>\n      <div className={classes.cover}></div>\n      {/* <div className={classes.title}>\n        <p >{title}</p>\n        <p >Persol Presents</p>\n      </div> */}\n      <img src={Frame} className={classes.frameDesign} />\n      <div className={classes.forms}>\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"メールアドレスを入力\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n        />\n        <div></div>\n        <input\n          type=\"password\"//passwordに後で変更\n          name=\"password\"\n          placeholder=\"パスワードを入力\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n        />\n        <div></div>\n        <input\n          type=\"checkbox\"\n          // checked={checked}\n          // defaultChecked={defaultChecked}\n          onChange={() => setIsChecked(!isChecked)}\n          className=\"checkbox__main\"\n        />\n        <button onClick={() => togglePopup()}>プライバシーポリシー</button>\n        {isPopup ?\n          <Popup text=\"Close me\" closePopup={togglePopup.bind(this)} />\n          : null\n        }\n        <div></div>\n        <button\n          disabled={!isChecked}\n          onClick={(e) => userLogin(e)}\n        >\n          ログイン\n      </button>\n      <div></div>\n        {errorMessage}\n\n\n        <div  className={classes.startText}> 事前にメールにてご案内しました<br></br>\n        メールアドレスとパスワードを入力してください</div>\n        <div>\n          <a className={classes.toStart} onClick={() => history.push('/password-reset')}>パスワードをお忘れの方はこちら</a>\n        </div>\n      </div>\n\n\n\n      <div className={classes.buttonDesign}>\n\n\n      </div>\n    </div >\n  )\n}\n\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}